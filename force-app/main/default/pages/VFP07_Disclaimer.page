<apex:page showHeader="false" sidebar="false">
    <apex:includeScript value="/soap/ajax/28.0/connection.js"/>
    <apex:includeScript value="/soap/ajax/28.0/apex.js"/>
    <script language="javascript">
        sforce.connection.sessionId = "{!$Api.Session_ID}";
        function showDisclaimer() {
            var vResults = sforce.connection.query("Select Id, Disclaimer_Accepted__c FROM User WHERE Id='{!$User.Id}' AND  Disclaimer_Accepted__c = Null");
            var vDocumentTab = vResults.getArray("records"); 
            if (vDocumentTab != null && vDocumentTab.length > 0){
                alert('Your personal information are collected solely for your use of this platform having for purpose the creation and management of contractual documents. In accordance with the provisions of the French data protection legislation ("loi informatique et libertés du 6 janvier 1978” modifiée), you are entitled to access and correct the information concerning you stored in this platform. If you want to exercise this right and receive the information about you, please contact Service.Privacy@axa-groupsolutions.com. You can also, for legitimate reasons, oppose the processing of your personal data.');    
                var u = new sforce.SObject("User");
                u.id = "{!$User.Id}";
                u.Disclaimer_Accepted__c = new Date().toISOString();
                sforce.connection.update([u]);
            }
        }  
    </script>
    
    <body onload="showDisclaimer()">
    </body>
    
</apex:page>