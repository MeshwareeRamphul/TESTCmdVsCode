<apex:page showHeader="true" sidebar="true">
<!-- MRA 19/09/2018: Evolution Case 4142 :
   Page implements pop up which is displayed when users click on the submit button from esignature page
   Pop up prevents users from clicking submit twice
-->
	<style type="text/css">
    .popupBackground{
        background-color:black;
        opacity: 0.90;
        filter: alpha(opacity = 20);
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        z-index: 9998;
    }
    .custPopup{
        background-color: white;
        border-width: 2px;
        border-style: solid;
        z-index: 9999;
        left: 50%;
        padding:10px;
        position: absolute;
        width: 500px;
        margin-left: -250px;
        top:100px;
        height:100px;
    }

</style>

<script>
    window.setTimeout("redirectpage();", 5000);    
    function redirectpage(){
    var currenturl=window.location.href;
    
    if(currenturl.indexOf('cTin')>-1){
         // get id after last back slash for contract-In
    	 var esignId=(currenturl.substring(currenturl.lastIndexOf('=') + 1)).replace('cTin','');
    	 window.top.location.href = 'apex/VFP37_SubmitCollecte?eSignatureId='+esignId;
    }
    else{
    	 // get id after last back slash for All-In
    	 var esignId=(currenturl.substring(currenturl.lastIndexOf('=') + 1));
    	 window.top.location.href = 'apex/VFP22_SubmitCollecte?eSignatureId='+esignId;
    }
     
	}
</script>


<apex:outputPanel id="submitInProgress">
        <apex:outputPanel styleClass="popupBackground" layout="block" />
            <apex:outputPanel styleClass="custPopup" layout="block" >
                <center>
                	 <br/><br/>
                      Submission of eSignature is in progress. <br/>
                      You will be redirected shortly...<br/>
                       <img src="/img/spinner.gif" width="25" height="25" />
                </center>
         </apex:outputPanel>
 </apex:outputPanel>


</apex:page>